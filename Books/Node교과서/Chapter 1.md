# 1. 노드 시작하기

1.1 핵심 개념 이해하기
-----
> Nodejs는 Chrome V8 javascript 엔진으로 빌드된 javasctipt 런타임 입니다.

### 1.1.1 서버 vs 런타임
서버 -> 네트워크를 통해 클라이언트에 정보나 서비스를 제공하는 **컴퓨터** 또는 **프로그램**   
런타임 -> 실행되는 환경   

노드는 자바스크립트 실행기라고 봐도 무방하다.

<img src="https://user-images.githubusercontent.com/72545732/136226525-abd3c83a-9b57-4df4-8113-9d6a8dc1213b.png" width="50%;">

* libuv는 노드의 특성인 이벤트 기반, 논 블로킹 I/O 모델을 구현 하고 있다!!   

### 1.1.2 이벤트 기반

이벤트 기반 -> 이벤트가 발생했을때 미리 지정해둔 작업을 수행하자!!!(클릭 Or 네트워크 요청)
이벤트 루프 -> 이벤트 발생시 호출할 콜백 함수들을 관리, 노드가 종료될 때까지 이벤트 처리를 위한 작업을 반복하므로 루프라 부른다 
태스크 큐 -> setTimeout 같은 타이머나 이벤트 리스너들이 대기하는 곳
백그라운드 -> 이벤트 발생 후, 백그라운드에서 태스크 큐로 타이머나 이벤트 리스너의 콜백 함수를 보냄

```javascript
function run() {
  console.log("3초 후 실행")
}

console.log("시작")
setTimeout(run, 3000);
console.log("끝")
```

<img src="https://user-images.githubusercontent.com/72545732/136229152-7c1528fa-0278-4fa5-b631-d1c6dd0fb64f.png" width="50%">

### 1.1.3 논 블로킹 I/O

논 블로킹 -> 이전 작업이 끝나지 않아도 작업을 수행할 수 있다
블로킹 -> 이전 작업이 끝나야지만 작업을 수행할 수 있다

```javascript
// 블로킹 방식
function longRunningTask() {
  // 오래 걸리는 작업
  console.log("작업 끝");
}

console.log("시작");
longRunningTask()
console.log("끝");

// 논 블로킹 방식
console.log("시작");
setTimeout(longRunningTask, 0) // 백그라운드에 탑재된 컨텍스트 들은 호출스택이 비워진 뒤에 실행되므로 이 코드에서는 제일 나중에 실행 됨
console.log("끝");
```

### 1.1.4 싱글 스레드
노드는 싱글스레드라 하지만 엄연히 말하자면 아니다.   
노드를 실행하면 프로세스하나가 생성되고 그 안에 여려가지 스레드가 실행되는데 그 중에 우리가 제어할 수 있는 스레드가 하나일 뿐이다.

* 노드에서 멀티 스레드를 이용하기 위한 방식
  * 스레드 풀 -> 노드 스스로 멀티 스레드 사용하는 것(암호화, 파일 입출력, 압축 등)
  * 워커 스레드 -> 노드 12에서 추가, 직접 다수의 스레드 관리 가능


|멀티 스레딩|멀티 프로세싱|
|--|---|
|하나의 프로세스에서 여러개의 스레드 사용|여러개의 프로세스 사용|
|cpu 작업이 많을 때 사용|I/O 요청이 많을 때 사용|
|프로그래밍이 어려움|프로그래밍이 쉬움|

1.2 서버로서의 노드
-----
노드는 논 블로킹 방식으로 동작하므로 I/O 요청이 많을때 효율적이다. libuv 라이브러리를 이용하여 논 블로킹 방식으로 처리한다.   
그러나 cpu 부하가 큰 작업에는 좋지 않다. 모두 하나의 스레드에서 처리하기 때문이다.   
그래서 노드는 개수는 많지만 크기는 작은 데이터를 실시간으로 주고 받는 데 적합!!!
(ex. 채팅 어플리케이션, 주식 차트, JSON 데이터를 제공하는 API 서버)

노드에는 웹 서버가 내장되어 있다!!! (입문자가 접하기 수월)
하지만 나중에 서버 규모가 커지면 nginx 등의 웹 서버를 노드 서버와 연결하는 것이 좋다.  


