# 운영체제 핵심 개념

### 도서관으로 비유
* 운영체제는 도서관
* application은 시민
* 컴퓨터 하드웨어는 책
* 운영체제의 역할
  * 시민은 책을 빌리러 도서관에 대출을 요청
  * 도서관은 적절한 책을 찾아서 시민에게 대출
  * 시민은 기한이 만료되면 책을 반납

### 응용 프로그램, 운영체제, 컴퓨터 하드웨어 관계
* 운영체제는 application이 요청하는 메모리를 허가, 분배
* 운영체제는 application이 요청하는 cpu 시간을 제공
* 운영체제는 applicaiton이 요청하는 IO Devices 사용을 허가/제어

### 운영체제는 사용자 인터페이스 제공
* 쉘(shell)
  * 쉘은 CLI/GUI로 분리

|user|user|||
|-|-|-|-|
|application|shell|
|OS|OS|
|Hardware|Hardware|
|cpu|network|memory|storage|

### 운영체제는 응용 프로그램을 위해서도 인터페이스를 제공
* API(Application Programming Interface) -> 함수로 제공
* 이 API들을 묶어서 라이브러리 형태로 제공    
**시스템콜** => 운영체제가 운영체제 각 기능을 사용할 수 잇또록 시스템 콜이라는 명령 또는 함수를 제공, 운영체제 기능을 호출하는 함수

### 정리
* 운영체제는 컴퓨터 하드웨어와 응용 프로그램을 관리
* 사용자 인터페이스 제공을 위해 쉘 프로그램을 제공
* 응용 프로그램이 운영체제 기능을 요청하기 위해서, 운영체제는 시스템 콜을 제공한다.
  * 보통 시스템 콜을 직접 사용하기 보다는, 해당 시스템 콜을 사용해서 만든 각 언어별 라이브러리(API)를 사용한다.


# 운영체제 구조

### CPU Protection Rings
* cpu도 권한 모드를 가지고 있다.
  * 사용자 모드(used by application!!!!)
  * 커널 모드(used by os!!!!) => 특별한 권한을 가진 명령어 실행과 원하는 작업 수행을 위한 자원 접근을 가능케 하는 모드

<img src="https://media.vlpt.us/images/oen/post/0e9df501-6c44-4789-9063-9cb74c93a902/image.png">

> 커널이란 -> OS의 핵심 소프트웨어  
> 쉘이란 -> 껍데기

단계별로 application이 접근하는 부분, kernel이 접근하는 부분 그려놓은 거군

* 시스템 콜은 커널 모드로 실행!!! 운영체제의 특권이 필요하기 때문
* 커널 모드에서만 실행 가능한 기능들이 있음
* 커널 모드로 실행하려면, 반드시 시스템 콜을 사용해야함(거쳐야 함)
* 시스템 콜은 운영체제에서 제공

<img src="https://user-images.githubusercontent.com/72545732/142640725-8ef7c798-7eb5-4aff-a822-2766aa41272f.png">

=> 응용프로그램이 전체 컴퓨터 시스템을 해치지 못하게 함    
=> ex) 주민등록등본을 제공 받으려면 공인기관에 가서 특별한 신청서를 쓰고 권한을 가진 공무원이 제공해주어야 한다. -> 커널모드    

신청 하는 시민 -> application    
특별한 신청서 -> 시스템 콜    
공무원 -> 커널   모드

<img src="https://user-images.githubusercontent.com/72545732/142641818-01171dc8-8ce3-4c67-ad3e-826aa18f8c8c.png">

## 정리
* 운영체제는 **시스템 콜**을 제공
* 각 언어별로 이 시스템 콜을 사용하기 위한 **API**를 제공한다
* 이 API가 호출되면 커널모드로 변경되어 OS내부에서 해당명령이 실행되고 다시 application으로 돌아간다.





# 프로세스 스케줄링

- 배치 처리 시스템, 시분할 시스템, 멀티 태스킹

### 배치 처리 시스템
* 자동으로 다음 application이 이어서 실행될 수 있도록 하는 시스템
* 여러 프로그램을 순차적으로 실행시킬수 있게 해주세요
  * 어떤 프로그램은 실행에 엄청 오래걸릴 수 있다
  * 나는 mp3 음악을 들으면서, 문서 작성을 하고 싶어요 => 배치 처리 시스템에서는 불가능
  * 여러 사용자가 동시에 하나의 컴퓨터를 사용하려면??? (다중 사용자 지원)

> 멀티 프로그래밍, 시분할 시스템 등장

### 시분할 시스템
* 응용 프로그램이 cpu를 점유하는 시간을 잘게 쪼개서 실행될 수 있도록 하는 시스템

<img src="https://user-images.githubusercontent.com/72545732/142643670-8b72028e-17d7-4f2e-884e-30a88e4d23f8.png">

### 멀티 태스킹
* 단일 cpu에서, 여러 응용 프로그램이 동시에 실행되는 것처럼 보이는 시스템

### 멀티 태스킹과 멀티 프로세싱
* 멀티 태스킹 => 단일 cpu 
* 멀티 프로세싱 => 여러 cpu에 하나의 프로그램을 병렬로 실행해서 실행속도를 극대화시키는 시스템


# 프로세스 스케줄링

### 멀티 프로그래밍
* 최대한 cpu를 많이 활용하자
  * 시간 대비 cpu 활용도를 높이자
  * 응용 프로그램을 짧은시간안에 조지자

* 응용 프로그램은 중간에 다른 작업을 필요로 하는 경우가 많다.
  * 중간에 파일을 읽어야 하는경우 저장매체에 접근해야 한다. 파일을 읽는 작업은 상대적으로 실행속도가 느린 작업, 그동안 application은 가만히 있어야 함)
  * 중간에 프린팅 하는 경우


<img src="https://user-images.githubusercontent.com/72545732/142646028-eb49f0a8-19e5-4e5a-a5ca-5cbb31e63237.png">

register, l1, l2, l3 cache는 cpu내부에 있따!!!!
